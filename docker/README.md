# STP Rotation Bioinformatics

The dockerfile is contained within this directory. This can be built by running the following command in the same directory as the dockerfile:

```
docker build -t bioinfo_rotation .
```

### Start the docker container

```
docker run -p <HOST_PORT>:22 -v /sdgs/reference:/reference_files:ro -v /sdgs/teaching/personal_storage/<USER>:/home/stpuser -v /sdgs/teaching/example_fastqs:/example_fastqs:ro --name <USER> -dit bioinfo_rotation bash /startup.sh
```

#### SSH

You can SSH into the container once you have opened `<HOST_POST>` by executing `sudo ufw allow <HOST_PORT>`

```
ssh -p <HOST_PORT> stpuser@<HOST_IP>
```
Password is stpuser.

You can use the script `setup_users.sh` to do these two steps for you - it's not sophisticated though. It takes a file of users as arg 1 and a port to start at as arg 2.

#### Data

Data is available inside the docker at `/example_fastqs` and this points to `/sdgs/teaching/example_fastqs` on the host.

Any data generated by the trainee should be stored in `/home/stpuser`, this points to `/sdgs/teaching/personal_storage/<USER>` on the host. This ensures any data they create is persistent in the event of a problem with their docker.
